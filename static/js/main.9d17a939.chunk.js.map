{"version":3,"sources":["logic/firebase.ts","logic/api/access.ts","logic/reducer/eventUser.ts","logic/reducer/bathUser.ts","logic/store.ts","logic/type.ts","component/NameTag/index.tsx","component/Calendar/index.tsx","component/EventUser/index.tsx","component/EventLog/index.tsx","component/HomeNavigation/index.tsx","component/Layout/index.tsx","pages/Bath/index.tsx","logic/api/wordTest.ts","component/WordTestPaper/FillTheBlanks/index.tsx","component/WordTestPaper/Dictation/index.tsx","component/WordTestPaper/index.tsx","pages/WordTest/index.tsx","component/WordTestLevelList/index.tsx","pages/WordTestHome/index.tsx","pages/Home/index.tsx","logic/api/ox.ts","component/WordTestWordRegist/WordInputCardFormItem/index.tsx","component/WordTestWordRegist/index.tsx","pages/WordTestRegist/index.tsx","index.tsx"],"names":["firebaseApp","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","store","getFirestore","getCollectionSnapshot","collection","documentName","a","docRef","doc","getDoc","docSnapshot","exists","data","eventLogIndex","getEventLogSnapshot","storeCollection","storeQuery","query","orderBy","getDocs","storeSnapshot","docs","map","undefined","getEventLog","eventDateLog","convertedDataform","log","date","Date","EventTime","seconds","text","EventLog","length","getEventState","list","eventDate","EventDate","eventName","EventName","addEvent","currentDate","userName","stateLogDocRef","setDoc","eventLogDocRef","name","initialEventUserState","getTime","fetchEventUser","eventUserThuck","createAsyncThunk","eventUserSlice","createSlice","initialState","reducers","extraReducers","pending","type","state","fulfilled","action","payload","rejected","console","countingDays","from","fromDay","toLocaleDateString","diff","sign","Math","floor","abs","getBathUser","days","initialBathUserState","dayPassed","bathUserSlice","getTodayBathUser","newState","eventUser","bathUserReducer","actions","rootReducers","combineReducers","eventUserReducer","bathUser","configureStore","reducer","UserName","james","henry","Text","Typography","Title","NameTag","props","useSelector","level","pickDate","color","Calendar","className","fullscreen","onSelect","setNewDate","onDateChanged","toDate","EventUser","intent","Fragment","useState","logState","setLogState","useEffect","then","defaultActiveKey","Panel","header","e","i","Item","toLocaleString","HomeNavigation","location","useLocation","mode","selectedKeys","pathname","to","HomeOutlined","CalendarOutlined","CheckSquareOutlined","Header","L","Sider","Content","Footer","Layout","children","style","minHeight","theme","Bath","setDate","dispatch","useDispatch","updateTodayUser","useCallback","onClick","addToast","message","success","background","getTestLevelList","Array","forEach","push","id","getWordTestSnapshot","getWordTest","testObject","test","Object","keys","key","addWordTest","docData","word","desc","BlankWords","FillTheBlanks","answerVisiblity","dataSource","index","example","partial","split","order","sentance","fill","join","definition","EditOutlined","fontSize","columns","title","dataIndex","width","showHeader","pagination","position","Dictation","audio","pronunciations","Audio","play","partOfSpeech","random","translation","answer","WordTestPaper","part1","part2","setTest","showAnswer","testList","wordType","JSON","parse","q","array","randomIndex","currentIndex","shuffle","count","round","slice","WordTest","params","useParams","WordTestLevelList","setList","WordTestHome","PlusCircleTwoTone","Home","initialWord","getPronunceAndExample","entries","entry","senses","sense","examples","exam","includes","pronounce","audioFile","fetchWordFromOx","word_id","apiurl","toLowerCase","options","method","headers","app_id","app_key","crosproxy","fetch","result","json","results","fetchPronunceAndExample","enties","lexicalEntries","WordInputCardFormItem","deleteItem","Option","Select","labels","label","align","rules","required","placeholder","allowClear","initialValue","value","MinusCircleTwoTone","WordTestWordRegist","testlist","setTestlist","formRef","useRef","current","setFieldsValue","saveTest","values","loading","content","duration","docName","completed","saveForm","override","stringify","alert","error","deleteFormItem","splice","filter","display","alignItems","padding","onFinish","layout","ref","flexGrow","size","htmlType","WordTestRegist","ReactDOM","render","StrictMode","element","path","document","getElementById"],"mappings":"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","file":"static/js/main.9d17a939.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\n//const analytics = getAnalytics(firebaseApp);\r\n\r\nimport { getFirestore, doc, getDoc } from \"firebase/firestore/lite\";\r\n//import { getAnalytics } from \"firebase/analytics\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nexport const firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGING_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n  measurementId: process.env.REACT_APP_MEASUREMENT_ID,\r\n};\r\n\r\n// Initialize Firebase\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\n\r\nexport const store = getFirestore(firebaseApp);\r\n\r\nexport const getCollectionSnapshot = async (\r\n  collection: string,\r\n  documentName: string\r\n) => {\r\n  const docRef = doc(store, collection, documentName);\r\n  const docSnapshot = await getDoc(docRef);\r\n  if (docSnapshot.exists()) {\r\n    return docSnapshot.data();\r\n  }\r\n};\r\n\r\n// export const getCollectionSnapshot = async (collectionName: string) => {\r\n//   const storeCollection = collection(store, collectionName);\r\n//   const storeSnapshot = await getDocs(storeCollection);\r\n//   return storeSnapshot.docs.map((doc) => doc.data());\r\n// };\r\n\r\nexport default store;\r\n","import store, { getCollectionSnapshot } from \"../firebase\";\r\nimport {\r\n  collection,\r\n  getDocs,\r\n  query,\r\n  where,\r\n  doc,\r\n  setDoc,\r\n  orderBy,\r\n} from \"firebase/firestore/lite\";\r\n\r\nlet eventLogIndex = 0;\r\n\r\nconst getAppStateSnapshot = (documentName: string) => {\r\n  if (process.env.REACT_APP_COLLECTION_APP_STATE) {\r\n    return getCollectionSnapshot(\r\n      process.env.REACT_APP_COLLECTION_APP_STATE,\r\n      documentName\r\n    );\r\n  } else {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nconst getEventLogSnapshot = async () => {\r\n  if (process.env.REACT_APP_COLLECTION_EVENT_LOG) {\r\n    const storeCollection = collection(\r\n      store,\r\n      process.env.REACT_APP_COLLECTION_EVENT_LOG\r\n    );\r\n    const storeQuery = query(storeCollection, orderBy(\"EventTime\", \"desc\"));\r\n    const storeSnapshot = await getDocs(storeQuery);\r\n    return storeSnapshot.docs.map((doc) => doc.data());\r\n  } else {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nexport const getEventLog = async () => {\r\n  try {\r\n    let eventDateLog = await getEventLogSnapshot();\r\n    if (eventDateLog) {\r\n      const convertedDataform = eventDateLog.map((log) => {\r\n        return {\r\n          date: new Date(log.EventTime.seconds * 1000),\r\n          text: log.EventLog,\r\n        };\r\n      });\r\n\r\n      eventLogIndex = convertedDataform.length + 1;\r\n      return convertedDataform;\r\n    } else {\r\n      return [];\r\n    }\r\n  } catch {\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const getEventState = async () => {\r\n  try {\r\n    let list = await getAppStateSnapshot(\"stateLog\");\r\n    if (list) {\r\n      return {\r\n        eventDate: new Date(list.EventDate.seconds * 1000),\r\n        eventName: list.EventName,\r\n      };\r\n    } else {\r\n      return {\r\n        eventDate: new Date(\"1917-1-1\"),\r\n        eventName: \"undefined\",\r\n      };\r\n    }\r\n  } catch {\r\n    return {\r\n      eventDate: new Date(\"2021-11-29\"),\r\n      eventName: \"james\",\r\n    };\r\n  }\r\n};\r\n\r\nexport const queryDocument = async (eventId: number) => {\r\n  if (process.env.REACT_APP_COLLECTION_NAME) {\r\n    const collectionStore = collection(\r\n      store,\r\n      process.env.REACT_APP_COLLECTION_NAME\r\n    );\r\n    const queried = query(collectionStore, where(\"eventId\", \"==\", eventId));\r\n\r\n    const querySnapshot = await getDocs(queried);\r\n    querySnapshot.forEach((doc) => {\r\n      const data = doc.data();\r\n      console.log(doc.id, \"=>\", data);\r\n    });\r\n  }\r\n};\r\n\r\nexport const addEvent = async (currentDate: Date, userName: string) => {\r\n  if (process.env.REACT_APP_COLLECTION_APP_STATE) {\r\n    const stateLogDocRef = doc(\r\n      store,\r\n      process.env.REACT_APP_COLLECTION_APP_STATE,\r\n      \"stateLog\"\r\n    );\r\n    await setDoc(stateLogDocRef, {\r\n      EventDate: currentDate,\r\n      EventName: userName,\r\n    });\r\n\r\n    if (process.env.REACT_APP_COLLECTION_EVENT_LOG) {\r\n      const eventLogDocRef = doc(\r\n        store,\r\n        process.env.REACT_APP_COLLECTION_EVENT_LOG,\r\n        `event${eventLogIndex}`\r\n      );\r\n      await setDoc(eventLogDocRef, {\r\n        EventTime: currentDate,\r\n        EventLog: `set ${userName}`,\r\n      });\r\n    }\r\n\r\n    return { date: currentDate, name: userName };\r\n  } else {\r\n    return undefined;\r\n  }\r\n};\r\n","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { getEventState } from \"logic/api/access\";\r\nimport { EventUser } from \"logic/type\";\r\n\r\n// eventUser 는 일단 fetch 를 사용하므로 슬라이스를 사용하는 것에 적당하다.\r\n\r\nconst initialEventUserState: EventUser = {\r\n  date: new Date(\"1917-1-1\").getTime(),\r\n  name: \"james\",\r\n};\r\n\r\nconst fetchEventUser = async (): Promise<EventUser> => {\r\n  const { eventDate, eventName } = await getEventState();\r\n  return { date: eventDate.getTime(), name: eventName };\r\n};\r\n\r\nexport const eventUserThuck = createAsyncThunk(\"request\", async () => {\r\n  return await fetchEventUser();\r\n});\r\n\r\nconst eventUserSlice = createSlice({\r\n  name: \"eventUser\",\r\n  initialState: initialEventUserState,\r\n  reducers: {},\r\n  extraReducers: {\r\n    [eventUserThuck.pending.type]: (state) => {},\r\n    [eventUserThuck.fulfilled.type]: (\r\n      state,\r\n      action: PayloadAction<EventUser>\r\n    ) => {\r\n      const payload = action.payload;\r\n      state.date = payload.date;\r\n      state.name = payload.name;\r\n    },\r\n    [eventUserThuck.rejected.type]: (state) => {\r\n      console.log(\"eventUserThuck.rejected.type\");\r\n    },\r\n  },\r\n});\r\n\r\nexport default eventUserSlice.reducer;\r\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\r\nimport { BathUser, EventUser } from \"logic/type\";\r\n\r\n// 막상 BathUserActionType 타입으로 분기하지는 않는다.\r\n// 리듀서를 모두 방문하기 때문에 결국 type 키값으로 판단하게 된다.\r\nexport interface BathUserActionType {\r\n  type: \"request/whois\";\r\n  date: number;\r\n  eventUser: EventUser;\r\n}\r\n\r\nconst countingDays = (date: Date, from: Date) => {\r\n  const fromDay = new Date(from.toLocaleDateString());\r\n  const currentDay = new Date(date.toLocaleDateString());\r\n  const one_day = 1000 * 60 * 60 * 24;\r\n  const diff = (currentDay.getTime() - fromDay.getTime()) / one_day;\r\n  const sign = Math.sign(diff);\r\n  return Math.floor(Math.abs(diff)) * sign;\r\n};\r\n\r\nconst getBathUser = (days: number, name: string): string => {\r\n  if (days % 2 === 0) {\r\n    if (name === \"james\") {\r\n      return \"james\";\r\n    } else {\r\n      return \"henry\";\r\n    }\r\n  } else {\r\n    if (name === \"james\") {\r\n      return \"henry\";\r\n    } else {\r\n      return \"james\";\r\n    }\r\n  }\r\n};\r\n\r\nconst initialBathUserState: BathUser = {\r\n  name: \"henry\",\r\n  dayPassed: 0\r\n}\r\n\r\nconst bathUserReducer = (state: BathUser = initialBathUserState, action: BathUserActionType) : BathUser => {\r\n  if (action.type === \"request/whois\") {\r\n    const dayPassed = countingDays(\r\n      new Date(action.date),\r\n      new Date(action.eventUser.date)\r\n    );\r\n\r\n    const userName = getBathUser(dayPassed, action.eventUser.name);\r\n\r\n    //console.log(dayPassed, userName);\r\n\r\n    return {\r\n      name: userName,\r\n      dayPassed\r\n    };\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n\r\nconst bathUserSlice = createSlice({\r\n  name: \"bathUser\",\r\n  initialState: initialBathUserState,\r\n  reducers: {\r\n    getTodayBathUser: (\r\n      state: BathUser,\r\n      action: PayloadAction<BathUserActionType>\r\n    ) => {\r\n      const newState = bathUserReducer(state, action.payload);\r\n\r\n      // 오브젝트 복사 부분이 문제가 되는 것 같다.\r\n      state.name = newState.name;\r\n      state.dayPassed = newState.dayPassed;\r\n    },\r\n  },\r\n  extraReducers: {},\r\n});\r\n\r\nexport const { getTodayBathUser } = bathUserSlice.actions;\r\n\r\nexport default bathUserSlice.reducer;\r\n","import { EventUser, BathUser } from \"./type\";\r\nimport eventUserReducer from \"./reducer/eventUser\";\r\nimport bathUserReducer from \"./reducer/bathUser\";\r\nimport { combineReducers, configureStore, Reducer } from \"@reduxjs/toolkit\";\r\n\r\nexport type RootState = {\r\n  eventUser: EventUser;\r\n  bathUser: BathUser;\r\n};\r\n\r\n// 런타임 오류는 섞어쓰는 것 때문인것 같다.\r\n\r\nconst rootReducers: Reducer<RootState> = combineReducers({\r\n  eventUser: eventUserReducer,\r\n  bathUser: bathUserReducer,\r\n});\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducers,\r\n  //devTools: true,\r\n});\r\n\r\nexport default store;\r\n","export type BathUser = {\r\n  name: string;\r\n  dayPassed: number;\r\n};\r\n\r\nexport type EventUser = {\r\n  date: number;\r\n  name: \"james\" | \"henry\";\r\n};\r\n\r\nexport type EventLog = {\r\n  date: number;\r\n  log: string;\r\n};\r\n\r\ntype UserNameType = {\r\n  [index: string]: string;\r\n};\r\n\r\nexport const UserName: UserNameType = {\r\n  james: \"준우\",\r\n  henry: \"건우\",\r\n};\r\n\r\nexport type WordTestType = {\r\n  [index: string]: string;\r\n};\r\n","import { Tag } from \"antd\";\r\nimport { RootState } from \"logic/store\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { UserName } from \"logic/type\";\r\nimport { Typography } from \"antd\";\r\n\r\nconst { Text, Title } = Typography;\r\n\r\nexport const NameTag = (props: { pickDate: Date }) => {\r\n  const bathUser = useSelector((state: RootState) => state.bathUser);\r\n\r\n  return (\r\n    <div>\r\n      <Title level={4}>\r\n        {props.pickDate.toLocaleDateString()}{\" \"}\r\n        <Tag color={bathUser.name === \"james\" ? \"processing\" : \"success\"}>\r\n          {UserName[bathUser.name]}\r\n        </Tag>{\" \"}\r\n        차례 입니다.\r\n      </Title>\r\n      <Text type=\"secondary\">\r\n        마지막 확인한 날짜로부터 {bathUser.dayPassed} 일이 경과했습니다.\r\n      </Text>\r\n    </div>\r\n  );\r\n};\r\n","import { Calendar as DatePicker } from \"antd\";\r\n\r\nexport const Calendar = (props: { setNewDate: any }) => {\r\n  const onDateChanged = (date: Date) => {\r\n    props.setNewDate(date);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bath-calendar-container\">\r\n      <DatePicker\r\n        fullscreen={false}\r\n        onSelect={(date: moment.Moment) => {\r\n          onDateChanged(date.toDate());\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Tag, Typography } from \"antd\";\r\nimport { RootState } from \"logic/store\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { UserName } from \"logic/type\";\r\n\r\nconst { Text } = Typography;\r\n\r\nexport const EventUser = () => {\r\n  const eventUser = useSelector((state: RootState) => state.eventUser);\r\n  const intent = eventUser.name === \"james\" ? \"processing\" : \"success\";\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Text>\r\n        마지막으로 <Tag color={intent}>{UserName[eventUser.name]}</Tag>가{\" \"}\r\n        {new Date(eventUser.date).toLocaleDateString()} 에 사용했습니다.\r\n      </Text>\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getEventLog } from \"../../logic/api/access\";\r\nimport { Collapse, Timeline } from \"antd\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"logic/store\";\r\n\r\nexport const EventLog = () => {\r\n  const type: { date: Date; text: string }[] = [];\r\n  const [logState, setLogState] = useState(type);\r\n\r\n  const eventUser = useSelector((state: RootState) => state.eventUser);\r\n\r\n  useEffect(() => {\r\n    getEventLog().then((log) => {\r\n      setLogState(log);\r\n    });\r\n  }, [eventUser]);\r\n\r\n  return (\r\n    <div>\r\n      <Collapse defaultActiveKey={[1]}>\r\n        <Collapse.Panel header=\"Event Log\" key=\"1\">\r\n          <Timeline>\r\n            {logState.map((e, i: number) => {\r\n              return (\r\n                <Timeline.Item key={i++}>\r\n                  [{e.date.toLocaleString()}] {e.text}\r\n                </Timeline.Item>\r\n              );\r\n            })}\r\n          </Timeline>\r\n        </Collapse.Panel>\r\n      </Collapse>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Menu } from \"antd\";\r\nimport {\r\n  HomeOutlined,\r\n  CheckSquareOutlined,\r\n  CalendarOutlined,\r\n} from \"@ant-design/icons\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\n\r\nexport const HomeNavigation = () => {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <Menu mode=\"horizontal\" selectedKeys={[location.pathname]}>\r\n      <Menu.Item key=\"/\">\r\n        <Link to=\"/\">\r\n          <HomeOutlined /> Home Funny\r\n        </Link>\r\n      </Menu.Item>\r\n      <Menu.Item key=\"/bath\">\r\n        <Link to=\"/bath\">\r\n          <CalendarOutlined /> Bath\r\n        </Link>\r\n      </Menu.Item>\r\n      <Menu.Item key=\"/wordtest\">\r\n        <Link to=\"/wordtest\">\r\n          <CheckSquareOutlined /> Word Test\r\n        </Link>\r\n      </Menu.Item>\r\n    </Menu>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Layout as L, Menu } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { BrowserView, MobileView } from \"react-device-detect\";\r\n\r\nimport \"./style.css\";\r\nimport { HomeNavigation } from \"component/HomeNavigation\";\r\n\r\nconst { Header, Sider, Content, Footer } = L;\r\n\r\ntype Props = {};\r\n\r\nexport const Layout: React.FC<Props> = ({ children }) => {\r\n  return (\r\n    <L style={{ minHeight: \"100vh\" }}>\r\n      <Header className=\"layout-print-display-none\">\r\n        <div>Home Funny</div>\r\n      </Header>\r\n      <BrowserView>\r\n        <L>\r\n          <Sider theme=\"light\" className=\"layout-print-display-none\">\r\n            <Menu mode=\"vertical\">\r\n              <Menu.Item key=\"bath\">\r\n                <Link to=\"/bath\">오늘의 화장실</Link>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"wordtest\">\r\n                <Link to=\"/wordtest\">정상 단어 테스트</Link>\r\n              </Menu.Item>\r\n            </Menu>\r\n          </Sider>\r\n          <Content className=\"layout-content\">{children}</Content>\r\n        </L>\r\n      </BrowserView>\r\n      <MobileView>\r\n        <L className=\"layout-print-display-none\">\r\n          <HomeNavigation />\r\n        </L>\r\n        <Content className=\"layout-content\">{children}</Content>\r\n      </MobileView>\r\n      <Footer className=\"layout-print-display-none\">\r\n        This is home funny, 2021\r\n      </Footer>\r\n    </L>\r\n  );\r\n};\r\n\r\nexport default Layout;\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { NameTag } from \"component/NameTag\";\r\nimport { Calendar } from \"component/Calendar\";\r\nimport { EventUser } from \"component/EventUser\";\r\nimport { EventLog } from \"component/EventLog\";\r\nimport { Card, Button, Divider, message, Space } from \"antd\";\r\nimport { addEvent } from \"logic/api/access\";\r\nimport { RootState } from \"logic/store\";\r\nimport { eventUserThuck } from \"logic/reducer/eventUser\";\r\nimport { getTodayBathUser } from \"logic/reducer/bathUser\";\r\n\r\nimport \"antd/dist/antd.css\";\r\nimport { UserName } from \"logic/type\";\r\n\r\nimport Layout from \"component/Layout\";\r\n\r\nconst Bath = () => {\r\n  const [pickDate, setDate] = useState<Date>(new Date());\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const eventUser = useSelector((state: RootState) => state.eventUser);\r\n\r\n  const updateTodayUser = useCallback(\r\n    (date: Date) => {\r\n      dispatch(\r\n        getTodayBathUser({\r\n          type: \"request/whois\",\r\n          date: date.getTime(),\r\n          eventUser: eventUser,\r\n        })\r\n      );\r\n    },\r\n    [dispatch, eventUser]\r\n  );\r\n\r\n  useEffect(() => {\r\n    dispatch(eventUserThuck());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    updateTodayUser(pickDate);\r\n    // 이벤트 핸들러에 해당한다.\r\n  }, [pickDate, eventUser, updateTodayUser]);\r\n\r\n  const onClick = (name: string) => {\r\n    addEvent(new Date(), name).then((e) => {\r\n      if (e) {\r\n        addToast(e.name);\r\n\r\n        dispatch(eventUserThuck());\r\n      } else {\r\n        console.log(\"add event failed\");\r\n      }\r\n    });\r\n  };\r\n\r\n  const addToast = (name: string) => {\r\n    message.success(`오늘부터 ${UserName[name]}가 사용합니다.`);\r\n  };\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"bath-app\">\r\n        <Card className=\"bp3-text-large bp3-running-text\">\r\n          <blockquote>\r\n            <NameTag pickDate={pickDate} />\r\n          </blockquote>\r\n          <EventUser />\r\n          <Calendar setNewDate={setDate} />\r\n        </Card>\r\n        <Space>\r\n          <Button\r\n            style={{ background: \"#1890ff\", color: \"white\" }}\r\n            onClick={() => onClick(\"james\")}\r\n          >\r\n            준우부터 다시 시작\r\n          </Button>\r\n          <Button\r\n            style={{ background: \"#52c41a\", color: \"white\" }}\r\n            onClick={() => onClick(\"henry\")}\r\n          >\r\n            건우부터 다시 시작\r\n          </Button>\r\n        </Space>\r\n\r\n        <Divider />\r\n        <EventLog />\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Bath;\r\n","import store, { getCollectionSnapshot } from \"../firebase\";\r\nimport { collection, doc, getDocs, setDoc } from \"firebase/firestore/lite\";\r\nimport { WordTestType } from \"logic/type\";\r\n\r\nexport const getTestLevelList = async () => {\r\n  try {\r\n    if (process.env.REACT_APP_COLLECTION_WORD_TEST) {\r\n      const storeCollection = collection(\r\n        store,\r\n        process.env.REACT_APP_COLLECTION_WORD_TEST\r\n      );\r\n\r\n      const storeSnapshot = await getDocs(storeCollection);\r\n\r\n      let list = Array<string>();\r\n      storeSnapshot.forEach((e) => list.push(e.id));\r\n\r\n      return list;\r\n    } else {\r\n      return Array<string>();\r\n    }\r\n  } catch {\r\n    return Array<string>();\r\n  }\r\n};\r\n\r\nconst getWordTestSnapshot = async (level: string) => {\r\n  if (process.env.REACT_APP_COLLECTION_WORD_TEST) {\r\n    return getCollectionSnapshot(\r\n      process.env.REACT_APP_COLLECTION_WORD_TEST,\r\n      level\r\n    );\r\n  } else {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nexport const getWordTest = async (level: string): Promise<WordTestType> => {\r\n  try {\r\n    let testObject = await getWordTestSnapshot(level);\r\n    if (testObject) {\r\n      let test: WordTestType = {};\r\n      for (const key of Object.keys(testObject)) {\r\n        test[key] = testObject[key];\r\n      }\r\n      return test;\r\n    }\r\n  } catch {}\r\n\r\n  return {};\r\n};\r\n\r\nexport const addWordTest = async (level: string, list: Array<WordTestType>) => {\r\n  try {\r\n    if (process.env.REACT_APP_COLLECTION_WORD_TEST) {\r\n      const stateLogDocRef = doc(\r\n        store,\r\n        process.env.REACT_APP_COLLECTION_WORD_TEST,\r\n        level\r\n      );\r\n\r\n      let docData = {};\r\n      list.map((e) => {\r\n        docData = { ...docData, [e.word]: e.desc };\r\n        return e;\r\n      });\r\n\r\n      await setDoc(stateLogDocRef, docData);\r\n    }\r\n\r\n    return true;\r\n  } catch {}\r\n\r\n  return false;\r\n};\r\n","import { Table } from \"antd\";\r\nimport { WordType } from \"logic/api/ox\";\r\nimport { EditOutlined } from \"@ant-design/icons\";\r\nimport React from \"react\";\r\n\r\nimport \"./style.css\";\r\n\r\nconst BlankWords = ({ list }: { list: Array<WordType> }) => {\r\n  return (\r\n    <div className=\"blank-words-container\">\r\n      {list.map((word) => (\r\n        <span key={word.word}>{word.word}</span>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const FillTheBlanks = ({\r\n  list,\r\n  answerVisiblity,\r\n}: {\r\n  list: Array<WordType>;\r\n  answerVisiblity: boolean;\r\n}) => {\r\n  const dataSource = list.map((e, index) => {\r\n    // 이건 잘 안된다.\r\n    // 사전에서 검색하는 예제는 시제가 적요된 경우가 있어서 그대로 쓸 수 없다.\r\n    if (e.example) {\r\n      const partial = e.example.split(e.word);\r\n\r\n      return {\r\n        key: e.word,\r\n        order: `${index + 1}.`,\r\n        sentance: (\r\n          <div className=\"fill-blank-table-row\">\r\n            {partial[0]}\r\n            <span> </span>\r\n            <span>\r\n              {answerVisiblity\r\n                ? `[ ${e.word} ]`\r\n                : Array(e.word.length).fill(\"__\").join(\"\")}\r\n            </span>\r\n            <span> </span>\r\n            {partial[1]}\r\n          </div>\r\n        ),\r\n      };\r\n    } else {\r\n      return {\r\n        key: e.word,\r\n        order: `${index + 1}.`,\r\n        sentance: <div className=\"fill-blank-table-row\">{e.definition}</div>,\r\n      };\r\n    }\r\n  });\r\n\r\n  const columns = [\r\n    {\r\n      title: \"No.\",\r\n      dataIndex: \"order\",\r\n      key: \"order\",\r\n      width: \"5%\",\r\n    },\r\n    {\r\n      title: \"Sentance\",\r\n      dataIndex: \"sentance\",\r\n      key: \"key\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"fill-blank-test-title\">\r\n        <EditOutlined style={{ fontSize: \"big\" }} /> Read and write the correct\r\n        word from the below.\r\n      </h2>\r\n      <Table\r\n        dataSource={dataSource}\r\n        columns={columns}\r\n        showHeader={false}\r\n        pagination={{ position: [] }}\r\n      />\r\n      <BlankWords list={list} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FillTheBlanks;\r\n","import { Table } from \"antd\";\r\nimport { WordType } from \"logic/api/ox\";\r\nimport { EditOutlined } from \"@ant-design/icons\";\r\n\r\nimport \"./style.css\";\r\n\r\nexport const Dictation = ({\r\n  list,\r\n  answerVisiblity,\r\n}: {\r\n  list: Array<WordType>;\r\n  answerVisiblity: boolean;\r\n}) => {\r\n  const pronunce = (audio: string) => {\r\n    new Audio(audio).play();\r\n  };\r\n\r\n  const dataSource = list.map((e, index) => {\r\n    return {\r\n      key: e.word,\r\n      order: `${index + 1}.`,\r\n      definition: (\r\n        <div\r\n          onClick={() => pronunce(e.pronunciations)}\r\n          className=\"dictation-table-definition-row\"\r\n        >\r\n          <span>{e.partOfSpeech}.</span>\r\n          <span> </span>\r\n          <span>{Math.random() < 0.5 ? e.definition : e.translation}</span>\r\n        </div>\r\n      ),\r\n      answer: (\r\n        <div className=\"dictation-table-answer-row\">\r\n          <div className=\"dictation-table-answer-row-word\">\r\n            {answerVisiblity ? e.word : \"\"}\r\n          </div>\r\n          <div className=\"dictation-table-answer-row-translate\">\r\n            {answerVisiblity ? e.translation : \"\"}\r\n          </div>\r\n        </div>\r\n      ),\r\n    };\r\n  });\r\n\r\n  const columns = [\r\n    {\r\n      title: \"No.\",\r\n      dataIndex: \"order\",\r\n      key: \"order\",\r\n      width: \"5%\",\r\n    },\r\n    {\r\n      title: \"Definition\",\r\n      dataIndex: \"definition\",\r\n      key: \"key\",\r\n    },\r\n    {\r\n      title: \"English Word\",\r\n      dataIndex: \"answer\",\r\n      key: \"key\",\r\n      width: \"25%\",\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"word-test-dictation\">\r\n      <h2 className=\"word-test-dictation-title\">\r\n        <EditOutlined style={{ fontSize: \"big\" }} /> Read and write the words.\r\n        Write both Present and Past forms for verbs.\r\n      </h2>\r\n      <Table\r\n        dataSource={dataSource}\r\n        columns={columns}\r\n        pagination={{ position: [] }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Dictation;\r\n","import { WordType } from \"logic/api/ox\";\r\nimport { getWordTest } from \"logic/api/wordTest\";\r\nimport { WordTestType } from \"logic/type\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport FillTheBlanks from \"./FillTheBlanks\";\r\nimport Dictation from \"./Dictation\";\r\n\r\nimport \"./style.css\";\r\nimport { Button } from \"antd\";\r\n\r\nconst shuffle = (array: any[]) => {\r\n  let currentIndex = array.length;\r\n  let randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (currentIndex !== 0) {\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex--;\r\n\r\n    // And swap it with the current element.\r\n    [array[currentIndex], array[randomIndex]] = [\r\n      array[randomIndex],\r\n      array[currentIndex],\r\n    ];\r\n  }\r\n\r\n  return array;\r\n};\r\n\r\ntype SaveType = {\r\n  part1: Array<WordType>;\r\n  part2: Array<WordType>;\r\n};\r\n\r\nexport const WordTestPaper = ({ level }: { level?: string }) => {\r\n  const [test, setTest] = useState<SaveType>({ part1: [], part2: [] });\r\n  const [answerVisiblity, showAnswer] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (level) {\r\n      getWordTest(level).then((test: WordTestType) => {\r\n        let testList = Array<WordType>();\r\n        for (const word of Object.keys(test)) {\r\n          const wordType: WordType = JSON.parse(test[word]);\r\n          testList.push(wordType);\r\n        }\r\n\r\n        const q = shuffle(testList);\r\n        const count = Math.round(testList.length / 2);\r\n\r\n        setTest({ part1: q.slice(0, count), part2: q.slice(count) });\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  const onClickShowAnswer = (visible: boolean) => {\r\n    showAnswer(visible);\r\n  };\r\n\r\n  return (\r\n    <div className=\"word-test-layout\">\r\n      <h2>{`<${level}>`}</h2>\r\n      <Dictation list={[...test.part1]} answerVisiblity={answerVisiblity} />\r\n      <br />\r\n      <FillTheBlanks list={[...test.part2]} answerVisiblity={answerVisiblity} />\r\n      <Button onClick={() => onClickShowAnswer(!answerVisiblity)}>\r\n        정답보기\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Layout from \"component/Layout\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { WordTestPaper } from \"component/WordTestPaper\";\r\n\r\nimport \"./style.css\";\r\n\r\nexport const WordTest = () => {\r\n  const params = useParams();\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"word-test-content-container\">\r\n        <WordTestPaper {...params} />\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default WordTest;\r\n","import { Button, Menu } from \"antd\";\r\nimport { getTestLevelList } from \"logic/api/wordTest\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport \"./style.css\";\r\n\r\nexport const WordTestLevelList = () => {\r\n  const [list, setList] = useState<Array<string>>([]);\r\n\r\n  useEffect(() => {\r\n    getTestLevelList().then((testList) => {\r\n      setList(testList);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <Menu>\r\n      {list.map((level) => (\r\n        <Menu.Item key={level}>\r\n          <div className=\"word-test-level-list-link-container\">\r\n            <Link to={`test/${level}`}>{level}</Link>\r\n            <Button type=\"link\">\r\n              <Link to={`regist/${level}`}>수정</Link>\r\n            </Button>\r\n          </div>\r\n        </Menu.Item>\r\n      ))}\r\n    </Menu>\r\n  );\r\n};\r\n","import React from \"react\";\r\n\r\nimport Layout from \"component/Layout\";\r\nimport { WordTestLevelList } from \"component/WordTestLevelList\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Button } from \"antd\";\r\nimport { PlusCircleTwoTone } from \"@ant-design/icons\";\r\n\r\nimport \"./style.css\";\r\n\r\nexport const WordTestHome = () => {\r\n  return (\r\n    <Layout>\r\n      <div className=\"word-test-home-content-container\">\r\n        <div>\r\n          <Button>\r\n            <Link to=\"regist\">\r\n              새 시험 등록 <PlusCircleTwoTone />\r\n            </Link>\r\n          </Button>\r\n        </div>\r\n        <div className=\"word-test-home-content-row\">\r\n          <WordTestLevelList />\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default WordTestHome;\r\n","import \"./style.css\";\r\n\r\nimport Layout from \"component/Layout\";\r\n\r\nexport const Home = () => {\r\n  return (\r\n    <Layout>\r\n      <div className=\"home-content-container\">Welcome to Home Funny !</div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","export type WordType = {\r\n  word: string;\r\n  partOfSpeech: string;\r\n  definition: string;\r\n  translation: string;\r\n  example: string;\r\n  pronunciations: string;\r\n};\r\n\r\nexport const initialWord: WordType = {\r\n  word: \"\",\r\n  partOfSpeech: \"\",\r\n  definition: \"\",\r\n  translation: \"\",\r\n  example: \"\",\r\n  pronunciations: \"\",\r\n};\r\n\r\ntype OxEntryType = {\r\n  etymologies: Array<any>;\r\n  language: string;\r\n  pronunciations: Array<any>;\r\n  senses: Array<any>;\r\n};\r\n\r\ntype OxResultType = {\r\n  text: string;\r\n  lexicalCategory: { id: string; text: string };\r\n  entries: Array<OxEntryType>;\r\n};\r\n\r\nconst fromEnties = ({\r\n  text,\r\n  lexicalCategory,\r\n  entries,\r\n}: OxResultType): WordType | undefined => {\r\n  try {\r\n    const entry = entries[\"0\"];\r\n    const pronunciations = entry.pronunciations[\"0\"].audioFile;\r\n\r\n    let definitions = Array<{ text: string; example: string }>();\r\n\r\n    for (const sense of entry.senses) {\r\n      if (sense.definitions) {\r\n        definitions.push({\r\n          text: sense.definitions[0],\r\n          example: sense.examples![0].text,\r\n        });\r\n      }\r\n    }\r\n\r\n    return {\r\n      word: text,\r\n      partOfSpeech: lexicalCategory.text,\r\n      definition: definitions[0].text,\r\n      translation: \"\",\r\n      example: definitions[0].example,\r\n      pronunciations: pronunciations,\r\n    };\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nconst getPronunce = ({ entries }: OxResultType) => {\r\n  try {\r\n    const entry = entries[\"0\"];\r\n\r\n    return entry.pronunciations[\"0\"].audioFile;\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nconst getPronunceAndExample = ({ text, entries }: OxResultType) => {\r\n  try {\r\n    const entry = entries[\"0\"];\r\n\r\n    for (const sense of entry.senses) {\r\n      if (sense.examples) {\r\n        // 예문의 경우 시제가 다르게 들어갈 수 있어서 깔끔하게 되지 않는다.\r\n\r\n        for (const exam of sense.examples) {\r\n          if (exam.text.includes(text)) {\r\n            return {\r\n              pronounce: entry.pronunciations[\"0\"].audioFile,\r\n              example: exam.text,\r\n            };\r\n          }\r\n        }\r\n\r\n        return {\r\n          pronounce: entry.pronunciations[\"0\"].audioFile,\r\n          example: sense.examples[\"0\"].text,\r\n        };\r\n      } else {\r\n        return {\r\n          pronounce: entry.pronunciations[\"0\"].audioFile,\r\n        };\r\n      }\r\n    }\r\n  } catch (e) {\r\n    console.log(e);\r\n  }\r\n};\r\n\r\nexport const fetchWordFromOx = async (text: string) => {\r\n  if (process.env.REACT_APP_OX_APP_ID && process.env.REACT_APP_OX_APP_KEY) {\r\n    const language = \"en-gb\";\r\n    const word_id = text;\r\n    const apiurl = `https://od-api.oxforddictionaries.com:443/api/v2/entries/${language}/${word_id.toLowerCase()}`;\r\n\r\n    const options = {\r\n      method: \"GET\",\r\n      headers: {\r\n        app_id: process.env.REACT_APP_OX_APP_ID,\r\n        app_key: process.env.REACT_APP_OX_APP_KEY,\r\n      },\r\n    };\r\n\r\n    const crosproxy = `https://home-funny-server.herokuapp.com/${apiurl}`;\r\n\r\n    const result = await fetch(crosproxy, options);\r\n    const json = await result.json();\r\n    if (json.results) {\r\n      return json.results;\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n};\r\n\r\nexport const searchWord = async (text: string) => {\r\n  const results = await fetchWordFromOx(text);\r\n\r\n  let wordDefinition = Array<WordType>();\r\n\r\n  if (results) {\r\n    const enties = results[\"0\"]!.lexicalEntries;\r\n    for (const e of enties) {\r\n      const cov = fromEnties(e);\r\n      cov && wordDefinition.push(cov);\r\n    }\r\n  }\r\n\r\n  return wordDefinition;\r\n};\r\n\r\nexport const fetchPronunciations = async (text: string) => {\r\n  const results = await fetchWordFromOx(text);\r\n  if (results) {\r\n    const enties = results[\"0\"]!.lexicalEntries;\r\n    for (const e of enties) {\r\n      return getPronunce(e);\r\n    }\r\n  }\r\n\r\n  return \"\";\r\n};\r\n\r\nexport const fetchPronunceAndExample = async (text: string) => {\r\n  const results = await fetchWordFromOx(text);\r\n  if (results) {\r\n    const enties = results[\"0\"]!.lexicalEntries;\r\n    for (const e of enties) {\r\n      return getPronunceAndExample(e);\r\n    }\r\n  }\r\n\r\n  return \"\";\r\n};\r\n","import { Button, Form, Input, Select, Space } from \"antd\";\r\nimport TextArea from \"antd/lib/input/TextArea\";\r\nimport { WordType } from \"logic/api/ox\";\r\nimport { MinusCircleTwoTone } from \"@ant-design/icons\";\r\n\r\nimport \"./style.css\";\r\n\r\ntype Props = {\r\n  index: number;\r\n  word: WordType;\r\n  deleteItem: (index: number, text: string) => void;\r\n};\r\n\r\nconst WordInputCardFormItem = ({ index, word, deleteItem }: Props) => {\r\n  const { Option } = Select;\r\n\r\n  const labels: WordType = {\r\n    word: \"단어\",\r\n    partOfSpeech: \"품사\",\r\n    definition: \"영문 뜻\",\r\n    translation: \"한글 뜻\",\r\n    example: \"예제\",\r\n    pronunciations: \"\",\r\n  };\r\n\r\n  return (\r\n    <Form.Item label={`Q.${index + 1}`}>\r\n      <Space align=\"start\">\r\n        <Form.Item name={[index, \"word\"]} rules={[{ required: true }]}>\r\n          <Input placeholder={labels[\"word\"]} allowClear />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name={[index, \"partOfSpeech\"]}\r\n          initialValue={word.partOfSpeech}\r\n        >\r\n          <Select placeholder={labels[\"partOfSpeech\"]}>\r\n            <Option value=\"Noun\">Noun</Option>\r\n            <Option value=\"Verb\">Verb</Option>\r\n            <Option value=\"Adjective\">Adjective</Option>\r\n            <Option value=\"Adverb\">Adverb</Option>\r\n            <Option value=\"Pronoun\">Pronoun</Option>\r\n            <Option value=\"Conjunction\">Conjunction</Option>\r\n            <Option value=\"Preposition\">Preposition</Option>\r\n            <Option value=\"Interjection\">Interjection</Option>\r\n          </Select>\r\n        </Form.Item>\r\n        <Button onClick={() => deleteItem(index, word.word)}>\r\n          <MinusCircleTwoTone /> 삭제\r\n        </Button>\r\n      </Space>\r\n      <Form.Item name={[index, \"definition\"]}>\r\n        <TextArea placeholder={labels[\"definition\"]} allowClear></TextArea>\r\n      </Form.Item>\r\n      <Form.Item name={[index, \"translation\"]}>\r\n        <Input placeholder={labels[\"translation\"]} allowClear></Input>\r\n      </Form.Item>\r\n      <Form.Item name={[index, \"example\"]}>\r\n        <TextArea placeholder={labels[\"example\"]} allowClear></TextArea>\r\n      </Form.Item>\r\n    </Form.Item>\r\n  );\r\n};\r\n\r\nexport default WordInputCardFormItem;\r\n","import { Button, Form, FormInstance, Input, message, Space } from \"antd\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { PlusCircleTwoTone } from \"@ant-design/icons\";\r\nimport { addWordTest, getWordTest } from \"logic/api/wordTest\";\r\nimport { fetchPronunceAndExample, initialWord, WordType } from \"logic/api/ox\";\r\nimport WordInputCardFormItem from \"./WordInputCardFormItem\";\r\nimport { WordTestType } from \"logic/type\";\r\n\r\nexport const WordTestWordRegist = ({ level }: { level?: string }) => {\r\n  const [testlist, setTestlist] = useState<Array<WordType>>([initialWord]);\r\n  const formRef = useRef<FormInstance>(null);\r\n\r\n  useEffect(() => {\r\n    if (level) {\r\n      getWordTest(level).then((test: WordTestType) => {\r\n        let testList = Array<WordType>();\r\n        for (const word of Object.keys(test)) {\r\n          const wordType: WordType = JSON.parse(test[word]);\r\n          testList.push(wordType);\r\n        }\r\n\r\n        setTestlist(testList);\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (formRef.current) {\r\n      testlist.map((word, index) => {\r\n        formRef.current?.setFieldsValue({\r\n          [index]: {\r\n            ...word,\r\n          },\r\n        });\r\n        return word;\r\n      });\r\n    }\r\n  }, [testlist]);\r\n\r\n  const addInputWord = () => {\r\n    setTestlist((list) => [...list, initialWord]);\r\n  };\r\n\r\n  const updateFromForm = (values: any) => {\r\n    let newWordList = Array<WordType>();\r\n\r\n    for (const key in values) {\r\n      if (key === \"title\") {\r\n        continue;\r\n      }\r\n\r\n      const { word, partOfSpeech, definition, translation, example } =\r\n        values[key];\r\n      if (!word) {\r\n        continue;\r\n      }\r\n\r\n      newWordList.push({\r\n        word: word,\r\n        partOfSpeech: partOfSpeech,\r\n        definition: definition,\r\n        translation: translation,\r\n        example: example,\r\n        pronunciations: \"\",\r\n      });\r\n    }\r\n\r\n    setTestlist(newWordList);\r\n  };\r\n\r\n  const saveTest = async (values: any) => {\r\n    console.log(values);\r\n\r\n    message.loading({\r\n      content: \"저장을 하고 있습니다...\",\r\n      key: \"updatable\",\r\n      duration: 0,\r\n    });\r\n\r\n    const docName = values[\"title\"];\r\n\r\n    let completed = true;\r\n    let saveForm = Array<WordTestType>();\r\n\r\n    for (const key in values) {\r\n      if (key === \"title\") {\r\n        continue;\r\n      }\r\n\r\n      const { word, partOfSpeech, definition, translation, example } =\r\n        values[key];\r\n      if (!word) {\r\n        continue;\r\n      }\r\n\r\n      const result = await fetchPronunceAndExample(word);\r\n      if (result) {\r\n        const override: WordType = {\r\n          word: word,\r\n          partOfSpeech: partOfSpeech,\r\n          definition: definition,\r\n          translation: translation,\r\n          example: example ? example : result.example,\r\n          pronunciations: result.pronounce,\r\n        };\r\n\r\n        saveForm.push({\r\n          word: word,\r\n          desc: JSON.stringify(override),\r\n        });\r\n      } else {\r\n        alert(`${word} 잘못된 단어가 있습니다.`);\r\n        completed = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (completed) {\r\n      const result = await addWordTest(docName, saveForm);\r\n      if (result) {\r\n        message.success({\r\n          content: \"저장했습니다.\",\r\n          key: \"updatable\",\r\n          duration: 2,\r\n        });\r\n      } else {\r\n        message.error({ content: \"서버에 접속할 수 없습니다.\", duration: 2 });\r\n      }\r\n    }\r\n  };\r\n\r\n  const deleteFormItem = (index: number, text: string) => {\r\n    setTestlist((list) => {\r\n      if (text === \"\") {\r\n        return list.splice(index, 1);\r\n      } else {\r\n        return list.filter((e) => e.word !== text);\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{ display: \"flex\", alignItems: \"flex-end\", padding: \"1rem\" }}>\r\n      <Form\r\n        onFinish={saveTest}\r\n        layout=\"vertical\"\r\n        ref={formRef}\r\n        style={{ flexGrow: \"1\" }}\r\n      >\r\n        <Form.Item\r\n          name=\"title\"\r\n          rules={[{ required: true }]}\r\n          label=\"테스트이름\"\r\n          initialValue={level}\r\n        >\r\n          <Input placeholder=\"정상 레벨 또는 워크북 페이지\" />\r\n        </Form.Item>\r\n        {testlist.map((e, index) => (\r\n          <WordInputCardFormItem\r\n            key={index}\r\n            index={index}\r\n            word={e}\r\n            deleteItem={deleteFormItem}\r\n          />\r\n        ))}\r\n        <Space size={40}>\r\n          <Button onClick={addInputWord}>\r\n            단어 추가 <PlusCircleTwoTone />\r\n          </Button>\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            저장\r\n          </Button>\r\n        </Space>\r\n      </Form>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Layout from \"component/Layout\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { WordTestWordRegist } from \"component/WordTestWordRegist\";\r\n\r\nimport \"./style.css\";\r\n\r\nexport const WordTestRegist = () => {\r\n  const params = useParams();\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"word-test-content-container\">\r\n        <WordTestWordRegist {...params} />\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default WordTestRegist;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport store from \"logic/store\";\r\nimport { Provider } from \"react-redux\";\r\nimport { Route, Routes } from \"react-router\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport Bath from \"pages/Bath\";\r\nimport WordTest from \"pages/WordTest\";\r\nimport WordTestHome from \"pages/WordTestHome\";\r\nimport Home from \"pages/Home\";\r\n\r\nimport \"./index.css\";\r\nimport WordTestRegist from \"pages/WordTestRegist\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <BrowserRouter>\r\n        <Routes>\r\n          <Route index element={<Home />} />\r\n          <Route path=\"bath\" element={<Bath />} />\r\n          <Route path=\"wordtest\" element={<WordTestHome />} />\r\n          <Route path=\"wordtest/regist/\" element={<WordTestRegist />} />\r\n          <Route path=\"wordtest/regist/:level\" element={<WordTestRegist />} />\r\n          <Route path=\"wordtest/test/:level\" element={<WordTest />} />\r\n          <Route path=\"*\" element={<Home />} />\r\n        </Routes>\r\n      </BrowserRouter>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}